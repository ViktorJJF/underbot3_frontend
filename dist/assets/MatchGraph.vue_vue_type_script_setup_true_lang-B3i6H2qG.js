import{d as G,r as k,y as H,c as w,k as F,o as d,a as c,b as e,t as l,F as O,l as D,n as I,q as u,u as B,w as M,A as P,e as T,p as V,z as W,B as Z,C as K,D as p}from"./index-DHr_EMP0.js";import{u as R,i as X,a as Y,b as _,c as tt,d as et,e as at,f as st,g as lt,h as nt,j as ot,E as it}from"./installCanvasRenderer-CQuuMhjR.js";const rt={key:0,class:"card mb-3"},dt={class:"card-body"},ct={class:"card-title"},mt={class:"table table-sm"},ut=["href"],ht=["href"],vt={class:"row"},ft={class:"col-sm-12 mb-2"},yt={class:"live-match"},gt={class:"match-ended"},bt={class:"unders-ended"},kt={class:"col-sm-6"},xt={key:0},$t={class:"ml18-BasketballClock_TimerInnerWrapper"},wt={class:"col-sm-6"},Ot={class:"ovm-ParticipantStackedCentered_Odds"},Dt={class:"ovm-ParticipantStackedCentered_Odds"},It={class:"col-sm-8"},St={class:"col-sm-4"},At={class:"graph"},Ct={class:"dialog-footer"},Pt=G({__name:"MatchGraph",props:{match:{type:Object,required:!0,default:()=>null},name:{type:String,default:"chart"},bettingOdds:{type:Array,default:()=>[]}},setup(t){R([X,Y,_,tt,et,at,st,lt,nt,ot]);const q=t,x=k(!1),U=k({}),z=k({});k("");const $=k([]);H(()=>q.bettingOdds,()=>{$.value=Z(q.bettingOdds)},{deep:!0,immediate:!0});const N=w(()=>$.value.map(a=>a.quarter+" "+p(a.millis))),v=w(()=>$.value.map(a=>({value:a.value,scores:a.scores}))),E=w(()=>j()),L=w(()=>({title:{text:""},tooltip:{trigger:"axis",formatter:a=>`<div class="bet-tooltip">
            ${a[0].axisValue}<br/>${a[0].data.scores?a[0].data.scores.join("-"):"-"}<br/>
            <span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:#5470c6;"></span>
            <span style="float:right;margin-left:10px;color:#666;font-weight:900">${a[0].data.value}</span>
             </div>`},legend:{},toolbox:{show:!0,feature:{dataZoom:{yAxisIndex:"none"},dataView:{readOnly:!1},magicType:{type:["line","bar"]},restore:{},saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:N.value},yAxis:{type:"value",axisLabel:{formatter:"{value} pts"},min:v.value.length>0?Math.min(...v.value.map(a=>a.value))-3:0,max:v.value.length>0?Math.max(...v.value.map(a=>a.value))+3:0,interval:5},series:[{type:"line",emphasis:{focus:"series"},data:v.value,smooth:!0,markPoint:{data:[{type:"max",name:"Max"},{type:"min",name:"Min"}]},markLine:{lineStyle:{type:"dotted"},data:E.value.map(a=>({xAxis:a.quarter+" "+p(a.millis),name:a.quarter,label:{formatter:a.quarter,position:"end"},position:"end"}))}}]}));function Q(a,s,{returnMsg:m=!1,sendAlert:f=!1}={}){a.externalId;const n=a.history;if(U.value[a.externalId]=n,n&&s){let i=[],y=0,h=0;for(let C=0;C<n.length;C++){let[g,b]=n[C].resultScore.split(":");g=parseInt(g),b=parseInt(b),i.push(g+b),y+=g+b,g+b<s&&h++}const r=y/n.length,o=(h/i.length*100).toFixed(2),S=i.length,A=h;let J={underPercent:o,totalAvg:r,totalQty:S,underQty:A};return z.value=JSON.parse(JSON.stringify(J)),m?`En el ${o}% (${A} de los últimos ${S} partidos) el score final fue menor a ${s}`:{underPercent:o,totalAvg:r,totalQty:S,underQty:A}}}function j(){let a,s,m,f,n,i,y,h;for(const r of $.value){let o=r.quarter;o!=="0"&&(!a&&o&&(a=o,n=r),!s&&o!==a&&(s=o,i=r),!m&&o!==a&&o!==s&&(m=o,y=r),!f&&o!==a&&o!==s&&o!==m&&(f=o,h=r))}return[n,i,y,h].filter(r=>r).map(r=>({...r,date:r.date}))}return(a,s)=>{const m=F("el-button"),f=F("el-dialog");return t.match&&t.match.teams?(d(),c("div",rt,[e("div",dt,[e("h5",ct,l(`${t.match.teams[0].name} (${t.match.scoresDetailed.home}) - (${t.match.scoresDetailed.away}) ${t.match.teams[1].name}`),1),e("table",mt,[e("thead",null,[e("tr",null,[s[2]||(s[2]=e("th",null,"Team / Total",-1)),(d(!0),c(O,null,D(t.match.periods,(n,i)=>(d(),c("th",{key:i},l(i),1))),128))])]),e("tbody",null,[e("tr",null,[e("td",null,l(t.match.teams[0].name),1),(d(!0),c(O,null,D(t.match.periods,(n,i)=>(d(),c("td",{key:i+"-home"},l(n.home),1))),128))]),e("tr",null,[e("td",null,l(t.match.teams[1].name),1),(d(!0),c(O,null,D(t.match.periods,(n,i)=>(d(),c("td",{key:i+"-away"},l(n.away),1))),128))]),e("tr",null,[s[3]||(s[3]=e("td",null,"Total",-1)),(d(!0),c(O,null,D(t.match.periods,(n,i)=>(d(),c("td",{key:i+"-total"},l(n.home+n.away),1))),128))])])]),e("h6",null,"ID: "+l(t.match._id),1),e("h6",null,[e("a",{href:`/matches/${t.match._id}`,target:"_blank"},l(t.match.externalId),9,ut),t.match.sportsBookId?(d(),c("a",{key:0,href:`https://doradobet.com/deportes/partido/${t.match.sportsBookId}`,target:"_blank"},"Doradobet "+l(t.match.sportsBookId),9,ht)):I("",!0),u(" - "+l(B(K)(t.match.createdAt)),1)]),e("div",vt,[e("div",ft,[M(e("span",yt,"LIVE",512),[[P,t.match.basketClock!==0]]),M(e("span",gt,"Juego Finalizado",512),[[P,t.match.isMatchOver]]),M(e("span",bt,"Under Finalizado",512),[[P,t.match.isUnderOver&&!t.match.isMatchOver]])]),e("div",kt,[e("h6",null," Total: "+l(t.match.scoresDetailed.home+t.match.scoresDetailed.away),1),t.match.underScore?(d(),c("h6",xt," Para alcanzar valor under: "+l(t.match.underScore-(t.match.scoresDetailed.home+t.match.scoresDetailed.away)),1)):I("",!0),e("h6",null,[s[4]||(s[4]=u(" Tiempo: ")),e("span",$t,l(t.match.quarter)+" "+l(B(p)(t.match.basketClock)),1)])]),e("div",wt,[e("h6",null,[u(" O "+l(t.match.underScore||"Finalizado")+" ",1),e("span",Ot,l(t.match.overQuota),1)]),e("h6",null,[u(" U "+l(t.match.underScore||"Finalizado")+" ",1),e("span",Dt,l(t.match.underQuota),1)])]),e("div",It,[s[5]||(s[5]=e("span",{class:"subtitle"},"Under histórico:",-1)),u(" "+l(Q(t.match,t.match.unders.length>0?t.match.unders[t.match.unders.length-1].value:0,{returnMsg:!0,sendAlert:!0})),1)]),e("div",St,[T(m,{small:"",type:"success",plain:""},{default:V(()=>s[6]||(s[6]=[u("Predecir under")])),_:1})])]),e("div",At,[T(B(it),{class:"chart item",option:L.value},null,8,["option"])])]),x.value?(d(),W(f,{key:0,modelValue:x.value,"onUpdate:modelValue":s[1]||(s[1]=n=>x.value=n),title:`${t.match.teams[0].name} - ${t.match.teams[1].name}`,width:"30%"},{footer:V(()=>[e("span",Ct,[T(m,{type:"primary",onClick:s[0]||(s[0]=n=>x.value=!1)},{default:V(()=>s[7]||(s[7]=[u("Listo!")])),_:1})])]),_:1},8,["modelValue","title"])):I("",!0)])):I("",!0)}}});export{Pt as _};
